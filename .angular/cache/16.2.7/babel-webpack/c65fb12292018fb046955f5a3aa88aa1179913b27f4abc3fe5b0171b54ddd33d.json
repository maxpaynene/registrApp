{"ast":null,"code":"import { Html5QrcodeConstants, Html5QrcodeScanType, Html5QrcodeErrorFactory, BaseLoggger, isNullOrUndefined, clip } from \"./core\";\nimport { Html5Qrcode } from \"./html5-qrcode\";\nimport { Html5QrcodeScannerStrings } from \"./strings\";\nimport { ASSET_FILE_SCAN, ASSET_CAMERA_SCAN } from \"./image-assets\";\nimport { PersistedDataManager } from \"./storage\";\nimport { LibraryInfoContainer } from \"./ui\";\nimport { CameraPermissions } from \"./camera/permissions\";\nimport { ScanTypeSelector } from \"./ui/scanner/scan-type-selector\";\nimport { TorchButton } from \"./ui/scanner/torch-button\";\nimport { FileSelectionUi } from \"./ui/scanner/file-selection-ui\";\nimport { BaseUiElementFactory, PublicUiElementIdAndClasses } from \"./ui/scanner/base\";\nimport { CameraSelectionUi } from \"./ui/scanner/camera-selection-ui\";\nimport { CameraZoomUi } from \"./ui/scanner/camera-zoom-ui\";\nvar Html5QrcodeScannerStatus;\n(function (Html5QrcodeScannerStatus) {\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_DEFAULT\"] = 0] = \"STATUS_DEFAULT\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_SUCCESS\"] = 1] = \"STATUS_SUCCESS\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_WARNING\"] = 2] = \"STATUS_WARNING\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_REQUESTING_PERMISSION\"] = 3] = \"STATUS_REQUESTING_PERMISSION\";\n})(Html5QrcodeScannerStatus || (Html5QrcodeScannerStatus = {}));\nfunction toHtml5QrcodeCameraScanConfig(config) {\n  return {\n    fps: config.fps,\n    qrbox: config.qrbox,\n    aspectRatio: config.aspectRatio,\n    disableFlip: config.disableFlip,\n    videoConstraints: config.videoConstraints\n  };\n}\nfunction toHtml5QrcodeFullConfig(config, verbose) {\n  return {\n    formatsToSupport: config.formatsToSupport,\n    useBarCodeDetectorIfSupported: config.useBarCodeDetectorIfSupported,\n    experimentalFeatures: config.experimentalFeatures,\n    verbose: verbose\n  };\n}\nvar Html5QrcodeScanner = function () {\n  function Html5QrcodeScanner(elementId, config, verbose) {\n    this.lastMatchFound = null;\n    this.cameraScanImage = null;\n    this.fileScanImage = null;\n    this.fileSelectionUi = null;\n    this.elementId = elementId;\n    this.config = this.createConfig(config);\n    this.verbose = verbose === true;\n    if (!document.getElementById(elementId)) {\n      throw \"HTML Element with id=\".concat(elementId, \" not found\");\n    }\n    this.scanTypeSelector = new ScanTypeSelector(this.config.supportedScanTypes);\n    this.currentScanType = this.scanTypeSelector.getDefaultScanType();\n    this.sectionSwapAllowed = true;\n    this.logger = new BaseLoggger(this.verbose);\n    this.persistedDataManager = new PersistedDataManager();\n    if (config.rememberLastUsedCamera !== true) {\n      this.persistedDataManager.reset();\n    }\n  }\n  Html5QrcodeScanner.prototype.render = function (qrCodeSuccessCallback, qrCodeErrorCallback) {\n    var _this = this;\n    this.lastMatchFound = null;\n    this.qrCodeSuccessCallback = function (decodedText, result) {\n      if (qrCodeSuccessCallback) {\n        qrCodeSuccessCallback(decodedText, result);\n      } else {\n        if (_this.lastMatchFound === decodedText) {\n          return;\n        }\n        _this.lastMatchFound = decodedText;\n        _this.setHeaderMessage(Html5QrcodeScannerStrings.lastMatch(decodedText), Html5QrcodeScannerStatus.STATUS_SUCCESS);\n      }\n    };\n    this.qrCodeErrorCallback = function (errorMessage, error) {\n      if (qrCodeErrorCallback) {\n        qrCodeErrorCallback(errorMessage, error);\n      }\n    };\n    var container = document.getElementById(this.elementId);\n    if (!container) {\n      throw \"HTML Element with id=\".concat(this.elementId, \" not found\");\n    }\n    container.innerHTML = \"\";\n    this.createBasicLayout(container);\n    this.html5Qrcode = new Html5Qrcode(this.getScanRegionId(), toHtml5QrcodeFullConfig(this.config, this.verbose));\n  };\n  Html5QrcodeScanner.prototype.pause = function (shouldPauseVideo) {\n    if (isNullOrUndefined(shouldPauseVideo) || shouldPauseVideo !== true) {\n      shouldPauseVideo = false;\n    }\n    this.getHtml5QrcodeOrFail().pause(shouldPauseVideo);\n  };\n  Html5QrcodeScanner.prototype.resume = function () {\n    this.getHtml5QrcodeOrFail().resume();\n  };\n  Html5QrcodeScanner.prototype.getState = function () {\n    return this.getHtml5QrcodeOrFail().getState();\n  };\n  Html5QrcodeScanner.prototype.clear = function () {\n    var _this = this;\n    var emptyHtmlContainer = function () {\n      var mainContainer = document.getElementById(_this.elementId);\n      if (mainContainer) {\n        mainContainer.innerHTML = \"\";\n        _this.resetBasicLayout(mainContainer);\n      }\n    };\n    if (this.html5Qrcode) {\n      return new Promise(function (resolve, reject) {\n        if (!_this.html5Qrcode) {\n          resolve();\n          return;\n        }\n        if (_this.html5Qrcode.isScanning) {\n          _this.html5Qrcode.stop().then(function (_) {\n            if (!_this.html5Qrcode) {\n              resolve();\n              return;\n            }\n            _this.html5Qrcode.clear();\n            emptyHtmlContainer();\n            resolve();\n          }).catch(function (error) {\n            if (_this.verbose) {\n              _this.logger.logError(\"Unable to stop qrcode scanner\", error);\n            }\n            reject(error);\n          });\n        } else {\n          _this.html5Qrcode.clear();\n          emptyHtmlContainer();\n          resolve();\n        }\n      });\n    }\n    return Promise.resolve();\n  };\n  Html5QrcodeScanner.prototype.getRunningTrackCapabilities = function () {\n    return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities();\n  };\n  Html5QrcodeScanner.prototype.getRunningTrackSettings = function () {\n    return this.getHtml5QrcodeOrFail().getRunningTrackSettings();\n  };\n  Html5QrcodeScanner.prototype.applyVideoConstraints = function (videoConstaints) {\n    return this.getHtml5QrcodeOrFail().applyVideoConstraints(videoConstaints);\n  };\n  Html5QrcodeScanner.prototype.getHtml5QrcodeOrFail = function () {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n    return this.html5Qrcode;\n  };\n  Html5QrcodeScanner.prototype.createConfig = function (config) {\n    if (config) {\n      if (!config.fps) {\n        config.fps = Html5QrcodeConstants.SCAN_DEFAULT_FPS;\n      }\n      if (config.rememberLastUsedCamera !== !Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED) {\n        config.rememberLastUsedCamera = Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED;\n      }\n      if (!config.supportedScanTypes) {\n        config.supportedScanTypes = Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE;\n      }\n      return config;\n    }\n    return {\n      fps: Html5QrcodeConstants.SCAN_DEFAULT_FPS,\n      rememberLastUsedCamera: Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED,\n      supportedScanTypes: Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE\n    };\n  };\n  Html5QrcodeScanner.prototype.createBasicLayout = function (parent) {\n    parent.style.position = \"relative\";\n    parent.style.padding = \"0px\";\n    parent.style.border = \"1px solid silver\";\n    this.createHeader(parent);\n    var qrCodeScanRegion = document.createElement(\"div\");\n    var scanRegionId = this.getScanRegionId();\n    qrCodeScanRegion.id = scanRegionId;\n    qrCodeScanRegion.style.width = \"100%\";\n    qrCodeScanRegion.style.minHeight = \"100px\";\n    qrCodeScanRegion.style.textAlign = \"center\";\n    parent.appendChild(qrCodeScanRegion);\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType)) {\n      this.insertCameraScanImageToScanRegion();\n    } else {\n      this.insertFileScanImageToScanRegion();\n    }\n    var qrCodeDashboard = document.createElement(\"div\");\n    var dashboardId = this.getDashboardId();\n    qrCodeDashboard.id = dashboardId;\n    qrCodeDashboard.style.width = \"100%\";\n    parent.appendChild(qrCodeDashboard);\n    this.setupInitialDashboard(qrCodeDashboard);\n  };\n  Html5QrcodeScanner.prototype.resetBasicLayout = function (mainContainer) {\n    mainContainer.style.border = \"none\";\n  };\n  Html5QrcodeScanner.prototype.setupInitialDashboard = function (dashboard) {\n    this.createSection(dashboard);\n    this.createSectionControlPanel();\n    if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n      this.createSectionSwap();\n    }\n  };\n  Html5QrcodeScanner.prototype.createHeader = function (dashboard) {\n    var header = document.createElement(\"div\");\n    header.style.textAlign = \"left\";\n    header.style.margin = \"0px\";\n    dashboard.appendChild(header);\n    var libraryInfo = new LibraryInfoContainer();\n    libraryInfo.renderInto(header);\n    var headerMessageContainer = document.createElement(\"div\");\n    headerMessageContainer.id = this.getHeaderMessageContainerId();\n    headerMessageContainer.style.display = \"none\";\n    headerMessageContainer.style.textAlign = \"center\";\n    headerMessageContainer.style.fontSize = \"14px\";\n    headerMessageContainer.style.padding = \"2px 10px\";\n    headerMessageContainer.style.margin = \"4px\";\n    headerMessageContainer.style.borderTop = \"1px solid #f6f6f6\";\n    header.appendChild(headerMessageContainer);\n  };\n  Html5QrcodeScanner.prototype.createSection = function (dashboard) {\n    var section = document.createElement(\"div\");\n    section.id = this.getDashboardSectionId();\n    section.style.width = \"100%\";\n    section.style.padding = \"10px 0px 10px 0px\";\n    section.style.textAlign = \"left\";\n    dashboard.appendChild(section);\n  };\n  Html5QrcodeScanner.prototype.createCameraListUi = function (scpCameraScanRegion, requestPermissionContainer, requestPermissionButton) {\n    var $this = this;\n    $this.showHideScanTypeSwapLink(false);\n    $this.setHeaderMessage(Html5QrcodeScannerStrings.cameraPermissionRequesting());\n    var createPermissionButtonIfNotExists = function () {\n      if (!requestPermissionButton) {\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      }\n    };\n    Html5Qrcode.getCameras().then(function (cameras) {\n      $this.persistedDataManager.setHasPermission(true);\n      $this.showHideScanTypeSwapLink(true);\n      $this.resetHeaderMessage();\n      if (cameras && cameras.length > 0) {\n        scpCameraScanRegion.removeChild(requestPermissionContainer);\n        $this.renderCameraSelection(cameras);\n      } else {\n        $this.setHeaderMessage(Html5QrcodeScannerStrings.noCameraFound(), Html5QrcodeScannerStatus.STATUS_WARNING);\n        createPermissionButtonIfNotExists();\n      }\n    }).catch(function (error) {\n      $this.persistedDataManager.setHasPermission(false);\n      if (requestPermissionButton) {\n        requestPermissionButton.disabled = false;\n      } else {\n        createPermissionButtonIfNotExists();\n      }\n      $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      $this.showHideScanTypeSwapLink(true);\n    });\n  };\n  Html5QrcodeScanner.prototype.createPermissionButton = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    var requestPermissionButton = BaseUiElementFactory.createElement(\"button\", this.getCameraPermissionButtonId());\n    requestPermissionButton.innerText = Html5QrcodeScannerStrings.cameraPermissionTitle();\n    requestPermissionButton.addEventListener(\"click\", function () {\n      requestPermissionButton.disabled = true;\n      $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer, requestPermissionButton);\n    });\n    requestPermissionContainer.appendChild(requestPermissionButton);\n  };\n  Html5QrcodeScanner.prototype.createPermissionsUi = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType) && this.persistedDataManager.hasCameraPermissions()) {\n      CameraPermissions.hasPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer);\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n          $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n        }\n      }).catch(function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      });\n      return;\n    }\n    this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n  };\n  Html5QrcodeScanner.prototype.createSectionControlPanel = function () {\n    var section = document.getElementById(this.getDashboardSectionId());\n    var sectionControlPanel = document.createElement(\"div\");\n    section.appendChild(sectionControlPanel);\n    var scpCameraScanRegion = document.createElement(\"div\");\n    scpCameraScanRegion.id = this.getDashboardSectionCameraScanRegionId();\n    scpCameraScanRegion.style.display = ScanTypeSelector.isCameraScanType(this.currentScanType) ? \"block\" : \"none\";\n    sectionControlPanel.appendChild(scpCameraScanRegion);\n    var requestPermissionContainer = document.createElement(\"div\");\n    requestPermissionContainer.style.textAlign = \"center\";\n    scpCameraScanRegion.appendChild(requestPermissionContainer);\n    if (this.scanTypeSelector.isCameraScanRequired()) {\n      this.createPermissionsUi(scpCameraScanRegion, requestPermissionContainer);\n    }\n    this.renderFileScanUi(sectionControlPanel);\n  };\n  Html5QrcodeScanner.prototype.renderFileScanUi = function (parent) {\n    var showOnRender = ScanTypeSelector.isFileScanType(this.currentScanType);\n    var $this = this;\n    var onFileSelected = function (file) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n      if (!ScanTypeSelector.isFileScanType($this.currentScanType)) {\n        return;\n      }\n      $this.setHeaderMessage(Html5QrcodeScannerStrings.loadingImage());\n      $this.html5Qrcode.scanFileV2(file, true).then(function (html5qrcodeResult) {\n        $this.resetHeaderMessage();\n        $this.qrCodeSuccessCallback(html5qrcodeResult.decodedText, html5qrcodeResult);\n      }).catch(function (error) {\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n        $this.qrCodeErrorCallback(error, Html5QrcodeErrorFactory.createFrom(error));\n      });\n    };\n    this.fileSelectionUi = FileSelectionUi.create(parent, showOnRender, onFileSelected);\n  };\n  Html5QrcodeScanner.prototype.renderCameraSelection = function (cameras) {\n    var _this = this;\n    var $this = this;\n    var scpCameraScanRegion = document.getElementById(this.getDashboardSectionCameraScanRegionId());\n    scpCameraScanRegion.style.textAlign = \"center\";\n    var cameraZoomUi = CameraZoomUi.create(scpCameraScanRegion, false);\n    var renderCameraZoomUiIfSupported = function (cameraCapabilities) {\n      var zoomCapability = cameraCapabilities.zoomFeature();\n      if (!zoomCapability.isSupported()) {\n        return;\n      }\n      cameraZoomUi.setOnCameraZoomValueChangeCallback(function (zoomValue) {\n        zoomCapability.apply(zoomValue);\n      });\n      var defaultZoom = 1;\n      if (_this.config.defaultZoomValueIfSupported) {\n        defaultZoom = _this.config.defaultZoomValueIfSupported;\n      }\n      defaultZoom = clip(defaultZoom, zoomCapability.min(), zoomCapability.max());\n      cameraZoomUi.setValues(zoomCapability.min(), zoomCapability.max(), defaultZoom, zoomCapability.step());\n      cameraZoomUi.show();\n    };\n    var cameraSelectUi = CameraSelectionUi.create(scpCameraScanRegion, cameras);\n    var cameraActionContainer = document.createElement(\"span\");\n    var cameraActionStartButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_START_BUTTON_ID);\n    cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n    cameraActionContainer.appendChild(cameraActionStartButton);\n    var cameraActionStopButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_STOP_BUTTON_ID);\n    cameraActionStopButton.innerText = Html5QrcodeScannerStrings.scanButtonStopScanningText();\n    cameraActionStopButton.style.display = \"none\";\n    cameraActionStopButton.disabled = true;\n    cameraActionContainer.appendChild(cameraActionStopButton);\n    var torchButton;\n    var createAndShowTorchButtonIfSupported = function (cameraCapabilities) {\n      if (!cameraCapabilities.torchFeature().isSupported()) {\n        if (torchButton) {\n          torchButton.hide();\n        }\n        return;\n      }\n      if (!torchButton) {\n        torchButton = TorchButton.create(cameraActionContainer, cameraCapabilities.torchFeature(), {\n          display: \"none\",\n          marginLeft: \"5px\"\n        }, function (errorMessage) {\n          $this.setHeaderMessage(errorMessage, Html5QrcodeScannerStatus.STATUS_WARNING);\n        });\n      } else {\n        torchButton.updateTorchCapability(cameraCapabilities.torchFeature());\n      }\n      torchButton.show();\n    };\n    scpCameraScanRegion.appendChild(cameraActionContainer);\n    var resetCameraActionStartButton = function (shouldShow) {\n      if (!shouldShow) {\n        cameraActionStartButton.style.display = \"none\";\n      }\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n      cameraActionStartButton.style.opacity = \"1\";\n      cameraActionStartButton.disabled = false;\n      if (shouldShow) {\n        cameraActionStartButton.style.display = \"inline-block\";\n      }\n    };\n    cameraActionStartButton.addEventListener(\"click\", function (_) {\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonScanningStarting();\n      cameraSelectUi.disable();\n      cameraActionStartButton.disabled = true;\n      cameraActionStartButton.style.opacity = \"0.5\";\n      if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n        $this.showHideScanTypeSwapLink(false);\n      }\n      $this.resetHeaderMessage();\n      var cameraId = cameraSelectUi.getValue();\n      $this.persistedDataManager.setLastUsedCameraId(cameraId);\n      $this.html5Qrcode.start(cameraId, toHtml5QrcodeCameraScanConfig($this.config), $this.qrCodeSuccessCallback, $this.qrCodeErrorCallback).then(function (_) {\n        cameraActionStopButton.disabled = false;\n        cameraActionStopButton.style.display = \"inline-block\";\n        resetCameraActionStartButton(false);\n        var cameraCapabilities = $this.html5Qrcode.getRunningTrackCameraCapabilities();\n        if (_this.config.showTorchButtonIfSupported === true) {\n          createAndShowTorchButtonIfSupported(cameraCapabilities);\n        }\n        if (_this.config.showZoomSliderIfSupported === true) {\n          renderCameraZoomUiIfSupported(cameraCapabilities);\n        }\n      }).catch(function (error) {\n        $this.showHideScanTypeSwapLink(true);\n        cameraSelectUi.enable();\n        resetCameraActionStartButton(true);\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n    if (cameraSelectUi.hasSingleItem()) {\n      cameraActionStartButton.click();\n    }\n    cameraActionStopButton.addEventListener(\"click\", function (_) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n      cameraActionStopButton.disabled = true;\n      $this.html5Qrcode.stop().then(function (_) {\n        if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n          $this.showHideScanTypeSwapLink(true);\n        }\n        cameraSelectUi.enable();\n        cameraActionStartButton.disabled = false;\n        cameraActionStopButton.style.display = \"none\";\n        cameraActionStartButton.style.display = \"inline-block\";\n        if (torchButton) {\n          torchButton.reset();\n          torchButton.hide();\n        }\n        cameraZoomUi.removeOnCameraZoomValueChangeCallback();\n        cameraZoomUi.hide();\n        $this.insertCameraScanImageToScanRegion();\n      }).catch(function (error) {\n        cameraActionStopButton.disabled = false;\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n    if ($this.persistedDataManager.getLastUsedCameraId()) {\n      var cameraId = $this.persistedDataManager.getLastUsedCameraId();\n      if (cameraSelectUi.hasValue(cameraId)) {\n        cameraSelectUi.setValue(cameraId);\n        cameraActionStartButton.click();\n      } else {\n        $this.persistedDataManager.resetLastUsedCameraId();\n      }\n    }\n  };\n  Html5QrcodeScanner.prototype.createSectionSwap = function () {\n    var $this = this;\n    var TEXT_IF_CAMERA_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfCameraScanSelected();\n    var TEXT_IF_FILE_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfFileScanSelected();\n    var section = document.getElementById(this.getDashboardSectionId());\n    var switchContainer = document.createElement(\"div\");\n    switchContainer.style.textAlign = \"center\";\n    var switchScanTypeLink = BaseUiElementFactory.createElement(\"span\", this.getDashboardSectionSwapLinkId());\n    switchScanTypeLink.style.textDecoration = \"underline\";\n    switchScanTypeLink.style.cursor = \"pointer\";\n    switchScanTypeLink.innerText = ScanTypeSelector.isCameraScanType(this.currentScanType) ? TEXT_IF_CAMERA_SCAN_SELECTED : TEXT_IF_FILE_SCAN_SELECTED;\n    switchScanTypeLink.addEventListener(\"click\", function () {\n      if (!$this.sectionSwapAllowed) {\n        if ($this.verbose) {\n          $this.logger.logError(\"Section swap called when not allowed\");\n        }\n        return;\n      }\n      $this.resetHeaderMessage();\n      $this.fileSelectionUi.resetValue();\n      $this.sectionSwapAllowed = false;\n      if (ScanTypeSelector.isCameraScanType($this.currentScanType)) {\n        $this.clearScanRegion();\n        $this.getCameraScanRegion().style.display = \"none\";\n        $this.fileSelectionUi.show();\n        switchScanTypeLink.innerText = TEXT_IF_FILE_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_FILE;\n        $this.insertFileScanImageToScanRegion();\n      } else {\n        $this.clearScanRegion();\n        $this.getCameraScanRegion().style.display = \"block\";\n        $this.fileSelectionUi.hide();\n        switchScanTypeLink.innerText = TEXT_IF_CAMERA_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_CAMERA;\n        $this.insertCameraScanImageToScanRegion();\n        $this.startCameraScanIfPermissionExistsOnSwap();\n      }\n      $this.sectionSwapAllowed = true;\n    });\n    switchContainer.appendChild(switchScanTypeLink);\n    section.appendChild(switchContainer);\n  };\n  Html5QrcodeScanner.prototype.startCameraScanIfPermissionExistsOnSwap = function () {\n    var _this = this;\n    var $this = this;\n    if (this.persistedDataManager.hasCameraPermissions()) {\n      CameraPermissions.hasPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          var permissionButton = document.getElementById($this.getCameraPermissionButtonId());\n          if (!permissionButton) {\n            _this.logger.logError(\"Permission button not found, fail;\");\n            throw \"Permission button not found\";\n          }\n          permissionButton.click();\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n        }\n      }).catch(function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n      });\n      return;\n    }\n  };\n  Html5QrcodeScanner.prototype.resetHeaderMessage = function () {\n    var messageDiv = document.getElementById(this.getHeaderMessageContainerId());\n    messageDiv.style.display = \"none\";\n  };\n  Html5QrcodeScanner.prototype.setHeaderMessage = function (messageText, scannerStatus) {\n    if (!scannerStatus) {\n      scannerStatus = Html5QrcodeScannerStatus.STATUS_DEFAULT;\n    }\n    var messageDiv = this.getHeaderMessageDiv();\n    messageDiv.innerText = messageText;\n    messageDiv.style.display = \"block\";\n    switch (scannerStatus) {\n      case Html5QrcodeScannerStatus.STATUS_SUCCESS:\n        messageDiv.style.background = \"rgba(106, 175, 80, 0.26)\";\n        messageDiv.style.color = \"#477735\";\n        break;\n      case Html5QrcodeScannerStatus.STATUS_WARNING:\n        messageDiv.style.background = \"rgba(203, 36, 49, 0.14)\";\n        messageDiv.style.color = \"#cb2431\";\n        break;\n      case Html5QrcodeScannerStatus.STATUS_DEFAULT:\n      default:\n        messageDiv.style.background = \"rgba(0, 0, 0, 0)\";\n        messageDiv.style.color = \"rgb(17, 17, 17)\";\n        break;\n    }\n  };\n  Html5QrcodeScanner.prototype.showHideScanTypeSwapLink = function (shouldDisplay) {\n    if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n      if (shouldDisplay !== true) {\n        shouldDisplay = false;\n      }\n      this.sectionSwapAllowed = shouldDisplay;\n      this.getDashboardSectionSwapLink().style.display = shouldDisplay ? \"inline-block\" : \"none\";\n    }\n  };\n  Html5QrcodeScanner.prototype.insertCameraScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    if (this.cameraScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.cameraScanImage);\n      return;\n    }\n    this.cameraScanImage = new Image();\n    this.cameraScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.cameraScanImage);\n    };\n    this.cameraScanImage.width = 64;\n    this.cameraScanImage.style.opacity = \"0.8\";\n    this.cameraScanImage.src = ASSET_CAMERA_SCAN;\n    this.cameraScanImage.alt = Html5QrcodeScannerStrings.cameraScanAltText();\n  };\n  Html5QrcodeScanner.prototype.insertFileScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    if (this.fileScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.fileScanImage);\n      return;\n    }\n    this.fileScanImage = new Image();\n    this.fileScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.fileScanImage);\n    };\n    this.fileScanImage.width = 64;\n    this.fileScanImage.style.opacity = \"0.8\";\n    this.fileScanImage.src = ASSET_FILE_SCAN;\n    this.fileScanImage.alt = Html5QrcodeScannerStrings.fileScanAltText();\n  };\n  Html5QrcodeScanner.prototype.clearScanRegion = function () {\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    qrCodeScanRegion.innerHTML = \"\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionId = function () {\n    return \"\".concat(this.elementId, \"__dashboard_section\");\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionCameraScanRegionId = function () {\n    return \"\".concat(this.elementId, \"__dashboard_section_csr\");\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLinkId = function () {\n    return PublicUiElementIdAndClasses.SCAN_TYPE_CHANGE_ANCHOR_ID;\n  };\n  Html5QrcodeScanner.prototype.getScanRegionId = function () {\n    return \"\".concat(this.elementId, \"__scan_region\");\n  };\n  Html5QrcodeScanner.prototype.getDashboardId = function () {\n    return \"\".concat(this.elementId, \"__dashboard\");\n  };\n  Html5QrcodeScanner.prototype.getHeaderMessageContainerId = function () {\n    return \"\".concat(this.elementId, \"__header_message\");\n  };\n  Html5QrcodeScanner.prototype.getCameraPermissionButtonId = function () {\n    return PublicUiElementIdAndClasses.CAMERA_PERMISSION_BUTTON_ID;\n  };\n  Html5QrcodeScanner.prototype.getCameraScanRegion = function () {\n    return document.getElementById(this.getDashboardSectionCameraScanRegionId());\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLink = function () {\n    return document.getElementById(this.getDashboardSectionSwapLinkId());\n  };\n  Html5QrcodeScanner.prototype.getHeaderMessageDiv = function () {\n    return document.getElementById(this.getHeaderMessageContainerId());\n  };\n  return Html5QrcodeScanner;\n}();\nexport { Html5QrcodeScanner };","map":{"version":3,"names":["Html5QrcodeConstants","Html5QrcodeScanType","Html5QrcodeErrorFactory","BaseLoggger","isNullOrUndefined","clip","Html5Qrcode","Html5QrcodeScannerStrings","ASSET_FILE_SCAN","ASSET_CAMERA_SCAN","PersistedDataManager","LibraryInfoContainer","CameraPermissions","ScanTypeSelector","TorchButton","FileSelectionUi","BaseUiElementFactory","PublicUiElementIdAndClasses","CameraSelectionUi","CameraZoomUi","Html5QrcodeScannerStatus","toHtml5QrcodeCameraScanConfig","config","fps","qrbox","aspectRatio","disableFlip","videoConstraints","toHtml5QrcodeFullConfig","verbose","formatsToSupport","useBarCodeDetectorIfSupported","experimentalFeatures","Html5QrcodeScanner","elementId","lastMatchFound","cameraScanImage","fileScanImage","fileSelectionUi","createConfig","document","getElementById","concat","scanTypeSelector","supportedScanTypes","currentScanType","getDefaultScanType","sectionSwapAllowed","logger","persistedDataManager","rememberLastUsedCamera","reset","prototype","render","qrCodeSuccessCallback","qrCodeErrorCallback","_this","decodedText","result","setHeaderMessage","lastMatch","STATUS_SUCCESS","errorMessage","error","container","innerHTML","createBasicLayout","html5Qrcode","getScanRegionId","pause","shouldPauseVideo","getHtml5QrcodeOrFail","resume","getState","clear","emptyHtmlContainer","mainContainer","resetBasicLayout","Promise","resolve","reject","isScanning","stop","then","_","catch","logError","getRunningTrackCapabilities","getRunningTrackSettings","applyVideoConstraints","videoConstaints","SCAN_DEFAULT_FPS","DEFAULT_REMEMBER_LAST_CAMERA_USED","DEFAULT_SUPPORTED_SCAN_TYPE","parent","style","position","padding","border","createHeader","qrCodeScanRegion","createElement","scanRegionId","id","width","minHeight","textAlign","appendChild","isCameraScanType","insertCameraScanImageToScanRegion","insertFileScanImageToScanRegion","qrCodeDashboard","dashboardId","getDashboardId","setupInitialDashboard","dashboard","createSection","createSectionControlPanel","hasMoreThanOneScanType","createSectionSwap","header","margin","libraryInfo","renderInto","headerMessageContainer","getHeaderMessageContainerId","display","fontSize","borderTop","section","getDashboardSectionId","createCameraListUi","scpCameraScanRegion","requestPermissionContainer","requestPermissionButton","$this","showHideScanTypeSwapLink","cameraPermissionRequesting","createPermissionButtonIfNotExists","createPermissionButton","getCameras","cameras","setHasPermission","resetHeaderMessage","length","removeChild","renderCameraSelection","noCameraFound","STATUS_WARNING","disabled","getCameraPermissionButtonId","innerText","cameraPermissionTitle","addEventListener","createPermissionsUi","hasCameraPermissions","hasPermissions","sectionControlPanel","getDashboardSectionCameraScanRegionId","isCameraScanRequired","renderFileScanUi","showOnRender","isFileScanType","onFileSelected","file","loadingImage","scanFileV2","html5qrcodeResult","createFrom","create","cameraZoomUi","renderCameraZoomUiIfSupported","cameraCapabilities","zoomCapability","zoomFeature","isSupported","setOnCameraZoomValueChangeCallback","zoomValue","apply","defaultZoom","defaultZoomValueIfSupported","min","max","setValues","step","show","cameraSelectUi","cameraActionContainer","cameraActionStartButton","CAMERA_START_BUTTON_ID","scanButtonStartScanningText","cameraActionStopButton","CAMERA_STOP_BUTTON_ID","scanButtonStopScanningText","torchButton","createAndShowTorchButtonIfSupported","torchFeature","hide","marginLeft","updateTorchCapability","resetCameraActionStartButton","shouldShow","opacity","scanButtonScanningStarting","disable","cameraId","getValue","setLastUsedCameraId","start","getRunningTrackCameraCapabilities","showTorchButtonIfSupported","showZoomSliderIfSupported","enable","hasSingleItem","click","removeOnCameraZoomValueChangeCallback","getLastUsedCameraId","hasValue","setValue","resetLastUsedCameraId","TEXT_IF_CAMERA_SCAN_SELECTED","textIfCameraScanSelected","TEXT_IF_FILE_SCAN_SELECTED","textIfFileScanSelected","switchContainer","switchScanTypeLink","getDashboardSectionSwapLinkId","textDecoration","cursor","resetValue","clearScanRegion","getCameraScanRegion","SCAN_TYPE_FILE","SCAN_TYPE_CAMERA","startCameraScanIfPermissionExistsOnSwap","permissionButton","messageDiv","messageText","scannerStatus","STATUS_DEFAULT","getHeaderMessageDiv","background","color","shouldDisplay","getDashboardSectionSwapLink","Image","onload","src","alt","cameraScanAltText","fileScanAltText","SCAN_TYPE_CHANGE_ANCHOR_ID","CAMERA_PERMISSION_BUTTON_ID"],"sources":["/Users/mozartcatrina/Desktop/jorgito/registrApp/node_modules/html5-qrcode/esm/html5-qrcode-scanner.js"],"sourcesContent":["import { Html5QrcodeConstants, Html5QrcodeScanType, Html5QrcodeErrorFactory, BaseLoggger, isNullOrUndefined, clip, } from \"./core\";\nimport { Html5Qrcode, } from \"./html5-qrcode\";\nimport { Html5QrcodeScannerStrings, } from \"./strings\";\nimport { ASSET_FILE_SCAN, ASSET_CAMERA_SCAN, } from \"./image-assets\";\nimport { PersistedDataManager } from \"./storage\";\nimport { LibraryInfoContainer } from \"./ui\";\nimport { CameraPermissions } from \"./camera/permissions\";\nimport { ScanTypeSelector } from \"./ui/scanner/scan-type-selector\";\nimport { TorchButton } from \"./ui/scanner/torch-button\";\nimport { FileSelectionUi } from \"./ui/scanner/file-selection-ui\";\nimport { BaseUiElementFactory, PublicUiElementIdAndClasses } from \"./ui/scanner/base\";\nimport { CameraSelectionUi } from \"./ui/scanner/camera-selection-ui\";\nimport { CameraZoomUi } from \"./ui/scanner/camera-zoom-ui\";\nvar Html5QrcodeScannerStatus;\n(function (Html5QrcodeScannerStatus) {\n    Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_DEFAULT\"] = 0] = \"STATUS_DEFAULT\";\n    Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_SUCCESS\"] = 1] = \"STATUS_SUCCESS\";\n    Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_WARNING\"] = 2] = \"STATUS_WARNING\";\n    Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_REQUESTING_PERMISSION\"] = 3] = \"STATUS_REQUESTING_PERMISSION\";\n})(Html5QrcodeScannerStatus || (Html5QrcodeScannerStatus = {}));\nfunction toHtml5QrcodeCameraScanConfig(config) {\n    return {\n        fps: config.fps,\n        qrbox: config.qrbox,\n        aspectRatio: config.aspectRatio,\n        disableFlip: config.disableFlip,\n        videoConstraints: config.videoConstraints\n    };\n}\nfunction toHtml5QrcodeFullConfig(config, verbose) {\n    return {\n        formatsToSupport: config.formatsToSupport,\n        useBarCodeDetectorIfSupported: config.useBarCodeDetectorIfSupported,\n        experimentalFeatures: config.experimentalFeatures,\n        verbose: verbose\n    };\n}\nvar Html5QrcodeScanner = (function () {\n    function Html5QrcodeScanner(elementId, config, verbose) {\n        this.lastMatchFound = null;\n        this.cameraScanImage = null;\n        this.fileScanImage = null;\n        this.fileSelectionUi = null;\n        this.elementId = elementId;\n        this.config = this.createConfig(config);\n        this.verbose = verbose === true;\n        if (!document.getElementById(elementId)) {\n            throw \"HTML Element with id=\".concat(elementId, \" not found\");\n        }\n        this.scanTypeSelector = new ScanTypeSelector(this.config.supportedScanTypes);\n        this.currentScanType = this.scanTypeSelector.getDefaultScanType();\n        this.sectionSwapAllowed = true;\n        this.logger = new BaseLoggger(this.verbose);\n        this.persistedDataManager = new PersistedDataManager();\n        if (config.rememberLastUsedCamera !== true) {\n            this.persistedDataManager.reset();\n        }\n    }\n    Html5QrcodeScanner.prototype.render = function (qrCodeSuccessCallback, qrCodeErrorCallback) {\n        var _this = this;\n        this.lastMatchFound = null;\n        this.qrCodeSuccessCallback\n            = function (decodedText, result) {\n                if (qrCodeSuccessCallback) {\n                    qrCodeSuccessCallback(decodedText, result);\n                }\n                else {\n                    if (_this.lastMatchFound === decodedText) {\n                        return;\n                    }\n                    _this.lastMatchFound = decodedText;\n                    _this.setHeaderMessage(Html5QrcodeScannerStrings.lastMatch(decodedText), Html5QrcodeScannerStatus.STATUS_SUCCESS);\n                }\n            };\n        this.qrCodeErrorCallback =\n            function (errorMessage, error) {\n                if (qrCodeErrorCallback) {\n                    qrCodeErrorCallback(errorMessage, error);\n                }\n            };\n        var container = document.getElementById(this.elementId);\n        if (!container) {\n            throw \"HTML Element with id=\".concat(this.elementId, \" not found\");\n        }\n        container.innerHTML = \"\";\n        this.createBasicLayout(container);\n        this.html5Qrcode = new Html5Qrcode(this.getScanRegionId(), toHtml5QrcodeFullConfig(this.config, this.verbose));\n    };\n    Html5QrcodeScanner.prototype.pause = function (shouldPauseVideo) {\n        if (isNullOrUndefined(shouldPauseVideo) || shouldPauseVideo !== true) {\n            shouldPauseVideo = false;\n        }\n        this.getHtml5QrcodeOrFail().pause(shouldPauseVideo);\n    };\n    Html5QrcodeScanner.prototype.resume = function () {\n        this.getHtml5QrcodeOrFail().resume();\n    };\n    Html5QrcodeScanner.prototype.getState = function () {\n        return this.getHtml5QrcodeOrFail().getState();\n    };\n    Html5QrcodeScanner.prototype.clear = function () {\n        var _this = this;\n        var emptyHtmlContainer = function () {\n            var mainContainer = document.getElementById(_this.elementId);\n            if (mainContainer) {\n                mainContainer.innerHTML = \"\";\n                _this.resetBasicLayout(mainContainer);\n            }\n        };\n        if (this.html5Qrcode) {\n            return new Promise(function (resolve, reject) {\n                if (!_this.html5Qrcode) {\n                    resolve();\n                    return;\n                }\n                if (_this.html5Qrcode.isScanning) {\n                    _this.html5Qrcode.stop().then(function (_) {\n                        if (!_this.html5Qrcode) {\n                            resolve();\n                            return;\n                        }\n                        _this.html5Qrcode.clear();\n                        emptyHtmlContainer();\n                        resolve();\n                    }).catch(function (error) {\n                        if (_this.verbose) {\n                            _this.logger.logError(\"Unable to stop qrcode scanner\", error);\n                        }\n                        reject(error);\n                    });\n                }\n                else {\n                    _this.html5Qrcode.clear();\n                    emptyHtmlContainer();\n                    resolve();\n                }\n            });\n        }\n        return Promise.resolve();\n    };\n    Html5QrcodeScanner.prototype.getRunningTrackCapabilities = function () {\n        return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities();\n    };\n    Html5QrcodeScanner.prototype.getRunningTrackSettings = function () {\n        return this.getHtml5QrcodeOrFail().getRunningTrackSettings();\n    };\n    Html5QrcodeScanner.prototype.applyVideoConstraints = function (videoConstaints) {\n        return this.getHtml5QrcodeOrFail().applyVideoConstraints(videoConstaints);\n    };\n    Html5QrcodeScanner.prototype.getHtml5QrcodeOrFail = function () {\n        if (!this.html5Qrcode) {\n            throw \"Code scanner not initialized.\";\n        }\n        return this.html5Qrcode;\n    };\n    Html5QrcodeScanner.prototype.createConfig = function (config) {\n        if (config) {\n            if (!config.fps) {\n                config.fps = Html5QrcodeConstants.SCAN_DEFAULT_FPS;\n            }\n            if (config.rememberLastUsedCamera !== (!Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED)) {\n                config.rememberLastUsedCamera\n                    = Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED;\n            }\n            if (!config.supportedScanTypes) {\n                config.supportedScanTypes\n                    = Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE;\n            }\n            return config;\n        }\n        return {\n            fps: Html5QrcodeConstants.SCAN_DEFAULT_FPS,\n            rememberLastUsedCamera: Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED,\n            supportedScanTypes: Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE\n        };\n    };\n    Html5QrcodeScanner.prototype.createBasicLayout = function (parent) {\n        parent.style.position = \"relative\";\n        parent.style.padding = \"0px\";\n        parent.style.border = \"1px solid silver\";\n        this.createHeader(parent);\n        var qrCodeScanRegion = document.createElement(\"div\");\n        var scanRegionId = this.getScanRegionId();\n        qrCodeScanRegion.id = scanRegionId;\n        qrCodeScanRegion.style.width = \"100%\";\n        qrCodeScanRegion.style.minHeight = \"100px\";\n        qrCodeScanRegion.style.textAlign = \"center\";\n        parent.appendChild(qrCodeScanRegion);\n        if (ScanTypeSelector.isCameraScanType(this.currentScanType)) {\n            this.insertCameraScanImageToScanRegion();\n        }\n        else {\n            this.insertFileScanImageToScanRegion();\n        }\n        var qrCodeDashboard = document.createElement(\"div\");\n        var dashboardId = this.getDashboardId();\n        qrCodeDashboard.id = dashboardId;\n        qrCodeDashboard.style.width = \"100%\";\n        parent.appendChild(qrCodeDashboard);\n        this.setupInitialDashboard(qrCodeDashboard);\n    };\n    Html5QrcodeScanner.prototype.resetBasicLayout = function (mainContainer) {\n        mainContainer.style.border = \"none\";\n    };\n    Html5QrcodeScanner.prototype.setupInitialDashboard = function (dashboard) {\n        this.createSection(dashboard);\n        this.createSectionControlPanel();\n        if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n            this.createSectionSwap();\n        }\n    };\n    Html5QrcodeScanner.prototype.createHeader = function (dashboard) {\n        var header = document.createElement(\"div\");\n        header.style.textAlign = \"left\";\n        header.style.margin = \"0px\";\n        dashboard.appendChild(header);\n        var libraryInfo = new LibraryInfoContainer();\n        libraryInfo.renderInto(header);\n        var headerMessageContainer = document.createElement(\"div\");\n        headerMessageContainer.id = this.getHeaderMessageContainerId();\n        headerMessageContainer.style.display = \"none\";\n        headerMessageContainer.style.textAlign = \"center\";\n        headerMessageContainer.style.fontSize = \"14px\";\n        headerMessageContainer.style.padding = \"2px 10px\";\n        headerMessageContainer.style.margin = \"4px\";\n        headerMessageContainer.style.borderTop = \"1px solid #f6f6f6\";\n        header.appendChild(headerMessageContainer);\n    };\n    Html5QrcodeScanner.prototype.createSection = function (dashboard) {\n        var section = document.createElement(\"div\");\n        section.id = this.getDashboardSectionId();\n        section.style.width = \"100%\";\n        section.style.padding = \"10px 0px 10px 0px\";\n        section.style.textAlign = \"left\";\n        dashboard.appendChild(section);\n    };\n    Html5QrcodeScanner.prototype.createCameraListUi = function (scpCameraScanRegion, requestPermissionContainer, requestPermissionButton) {\n        var $this = this;\n        $this.showHideScanTypeSwapLink(false);\n        $this.setHeaderMessage(Html5QrcodeScannerStrings.cameraPermissionRequesting());\n        var createPermissionButtonIfNotExists = function () {\n            if (!requestPermissionButton) {\n                $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n            }\n        };\n        Html5Qrcode.getCameras().then(function (cameras) {\n            $this.persistedDataManager.setHasPermission(true);\n            $this.showHideScanTypeSwapLink(true);\n            $this.resetHeaderMessage();\n            if (cameras && cameras.length > 0) {\n                scpCameraScanRegion.removeChild(requestPermissionContainer);\n                $this.renderCameraSelection(cameras);\n            }\n            else {\n                $this.setHeaderMessage(Html5QrcodeScannerStrings.noCameraFound(), Html5QrcodeScannerStatus.STATUS_WARNING);\n                createPermissionButtonIfNotExists();\n            }\n        }).catch(function (error) {\n            $this.persistedDataManager.setHasPermission(false);\n            if (requestPermissionButton) {\n                requestPermissionButton.disabled = false;\n            }\n            else {\n                createPermissionButtonIfNotExists();\n            }\n            $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n            $this.showHideScanTypeSwapLink(true);\n        });\n    };\n    Html5QrcodeScanner.prototype.createPermissionButton = function (scpCameraScanRegion, requestPermissionContainer) {\n        var $this = this;\n        var requestPermissionButton = BaseUiElementFactory\n            .createElement(\"button\", this.getCameraPermissionButtonId());\n        requestPermissionButton.innerText\n            = Html5QrcodeScannerStrings.cameraPermissionTitle();\n        requestPermissionButton.addEventListener(\"click\", function () {\n            requestPermissionButton.disabled = true;\n            $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer, requestPermissionButton);\n        });\n        requestPermissionContainer.appendChild(requestPermissionButton);\n    };\n    Html5QrcodeScanner.prototype.createPermissionsUi = function (scpCameraScanRegion, requestPermissionContainer) {\n        var $this = this;\n        if (ScanTypeSelector.isCameraScanType(this.currentScanType)\n            && this.persistedDataManager.hasCameraPermissions()) {\n            CameraPermissions.hasPermissions().then(function (hasPermissions) {\n                if (hasPermissions) {\n                    $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer);\n                }\n                else {\n                    $this.persistedDataManager.setHasPermission(false);\n                    $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n                }\n            }).catch(function (_) {\n                $this.persistedDataManager.setHasPermission(false);\n                $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n            });\n            return;\n        }\n        this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n    };\n    Html5QrcodeScanner.prototype.createSectionControlPanel = function () {\n        var section = document.getElementById(this.getDashboardSectionId());\n        var sectionControlPanel = document.createElement(\"div\");\n        section.appendChild(sectionControlPanel);\n        var scpCameraScanRegion = document.createElement(\"div\");\n        scpCameraScanRegion.id = this.getDashboardSectionCameraScanRegionId();\n        scpCameraScanRegion.style.display\n            = ScanTypeSelector.isCameraScanType(this.currentScanType)\n                ? \"block\" : \"none\";\n        sectionControlPanel.appendChild(scpCameraScanRegion);\n        var requestPermissionContainer = document.createElement(\"div\");\n        requestPermissionContainer.style.textAlign = \"center\";\n        scpCameraScanRegion.appendChild(requestPermissionContainer);\n        if (this.scanTypeSelector.isCameraScanRequired()) {\n            this.createPermissionsUi(scpCameraScanRegion, requestPermissionContainer);\n        }\n        this.renderFileScanUi(sectionControlPanel);\n    };\n    Html5QrcodeScanner.prototype.renderFileScanUi = function (parent) {\n        var showOnRender = ScanTypeSelector.isFileScanType(this.currentScanType);\n        var $this = this;\n        var onFileSelected = function (file) {\n            if (!$this.html5Qrcode) {\n                throw \"html5Qrcode not defined\";\n            }\n            if (!ScanTypeSelector.isFileScanType($this.currentScanType)) {\n                return;\n            }\n            $this.setHeaderMessage(Html5QrcodeScannerStrings.loadingImage());\n            $this.html5Qrcode.scanFileV2(file, true)\n                .then(function (html5qrcodeResult) {\n                $this.resetHeaderMessage();\n                $this.qrCodeSuccessCallback(html5qrcodeResult.decodedText, html5qrcodeResult);\n            })\n                .catch(function (error) {\n                $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n                $this.qrCodeErrorCallback(error, Html5QrcodeErrorFactory.createFrom(error));\n            });\n        };\n        this.fileSelectionUi = FileSelectionUi.create(parent, showOnRender, onFileSelected);\n    };\n    Html5QrcodeScanner.prototype.renderCameraSelection = function (cameras) {\n        var _this = this;\n        var $this = this;\n        var scpCameraScanRegion = document.getElementById(this.getDashboardSectionCameraScanRegionId());\n        scpCameraScanRegion.style.textAlign = \"center\";\n        var cameraZoomUi = CameraZoomUi.create(scpCameraScanRegion, false);\n        var renderCameraZoomUiIfSupported = function (cameraCapabilities) {\n            var zoomCapability = cameraCapabilities.zoomFeature();\n            if (!zoomCapability.isSupported()) {\n                return;\n            }\n            cameraZoomUi.setOnCameraZoomValueChangeCallback(function (zoomValue) {\n                zoomCapability.apply(zoomValue);\n            });\n            var defaultZoom = 1;\n            if (_this.config.defaultZoomValueIfSupported) {\n                defaultZoom = _this.config.defaultZoomValueIfSupported;\n            }\n            defaultZoom = clip(defaultZoom, zoomCapability.min(), zoomCapability.max());\n            cameraZoomUi.setValues(zoomCapability.min(), zoomCapability.max(), defaultZoom, zoomCapability.step());\n            cameraZoomUi.show();\n        };\n        var cameraSelectUi = CameraSelectionUi.create(scpCameraScanRegion, cameras);\n        var cameraActionContainer = document.createElement(\"span\");\n        var cameraActionStartButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_START_BUTTON_ID);\n        cameraActionStartButton.innerText\n            = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n        cameraActionContainer.appendChild(cameraActionStartButton);\n        var cameraActionStopButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_STOP_BUTTON_ID);\n        cameraActionStopButton.innerText\n            = Html5QrcodeScannerStrings.scanButtonStopScanningText();\n        cameraActionStopButton.style.display = \"none\";\n        cameraActionStopButton.disabled = true;\n        cameraActionContainer.appendChild(cameraActionStopButton);\n        var torchButton;\n        var createAndShowTorchButtonIfSupported = function (cameraCapabilities) {\n            if (!cameraCapabilities.torchFeature().isSupported()) {\n                if (torchButton) {\n                    torchButton.hide();\n                }\n                return;\n            }\n            if (!torchButton) {\n                torchButton = TorchButton.create(cameraActionContainer, cameraCapabilities.torchFeature(), { display: \"none\", marginLeft: \"5px\" }, function (errorMessage) {\n                    $this.setHeaderMessage(errorMessage, Html5QrcodeScannerStatus.STATUS_WARNING);\n                });\n            }\n            else {\n                torchButton.updateTorchCapability(cameraCapabilities.torchFeature());\n            }\n            torchButton.show();\n        };\n        scpCameraScanRegion.appendChild(cameraActionContainer);\n        var resetCameraActionStartButton = function (shouldShow) {\n            if (!shouldShow) {\n                cameraActionStartButton.style.display = \"none\";\n            }\n            cameraActionStartButton.innerText\n                = Html5QrcodeScannerStrings\n                    .scanButtonStartScanningText();\n            cameraActionStartButton.style.opacity = \"1\";\n            cameraActionStartButton.disabled = false;\n            if (shouldShow) {\n                cameraActionStartButton.style.display = \"inline-block\";\n            }\n        };\n        cameraActionStartButton.addEventListener(\"click\", function (_) {\n            cameraActionStartButton.innerText\n                = Html5QrcodeScannerStrings.scanButtonScanningStarting();\n            cameraSelectUi.disable();\n            cameraActionStartButton.disabled = true;\n            cameraActionStartButton.style.opacity = \"0.5\";\n            if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n                $this.showHideScanTypeSwapLink(false);\n            }\n            $this.resetHeaderMessage();\n            var cameraId = cameraSelectUi.getValue();\n            $this.persistedDataManager.setLastUsedCameraId(cameraId);\n            $this.html5Qrcode.start(cameraId, toHtml5QrcodeCameraScanConfig($this.config), $this.qrCodeSuccessCallback, $this.qrCodeErrorCallback)\n                .then(function (_) {\n                cameraActionStopButton.disabled = false;\n                cameraActionStopButton.style.display = \"inline-block\";\n                resetCameraActionStartButton(false);\n                var cameraCapabilities = $this.html5Qrcode.getRunningTrackCameraCapabilities();\n                if (_this.config.showTorchButtonIfSupported === true) {\n                    createAndShowTorchButtonIfSupported(cameraCapabilities);\n                }\n                if (_this.config.showZoomSliderIfSupported === true) {\n                    renderCameraZoomUiIfSupported(cameraCapabilities);\n                }\n            })\n                .catch(function (error) {\n                $this.showHideScanTypeSwapLink(true);\n                cameraSelectUi.enable();\n                resetCameraActionStartButton(true);\n                $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n            });\n        });\n        if (cameraSelectUi.hasSingleItem()) {\n            cameraActionStartButton.click();\n        }\n        cameraActionStopButton.addEventListener(\"click\", function (_) {\n            if (!$this.html5Qrcode) {\n                throw \"html5Qrcode not defined\";\n            }\n            cameraActionStopButton.disabled = true;\n            $this.html5Qrcode.stop()\n                .then(function (_) {\n                if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n                    $this.showHideScanTypeSwapLink(true);\n                }\n                cameraSelectUi.enable();\n                cameraActionStartButton.disabled = false;\n                cameraActionStopButton.style.display = \"none\";\n                cameraActionStartButton.style.display = \"inline-block\";\n                if (torchButton) {\n                    torchButton.reset();\n                    torchButton.hide();\n                }\n                cameraZoomUi.removeOnCameraZoomValueChangeCallback();\n                cameraZoomUi.hide();\n                $this.insertCameraScanImageToScanRegion();\n            }).catch(function (error) {\n                cameraActionStopButton.disabled = false;\n                $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n            });\n        });\n        if ($this.persistedDataManager.getLastUsedCameraId()) {\n            var cameraId = $this.persistedDataManager.getLastUsedCameraId();\n            if (cameraSelectUi.hasValue(cameraId)) {\n                cameraSelectUi.setValue(cameraId);\n                cameraActionStartButton.click();\n            }\n            else {\n                $this.persistedDataManager.resetLastUsedCameraId();\n            }\n        }\n    };\n    Html5QrcodeScanner.prototype.createSectionSwap = function () {\n        var $this = this;\n        var TEXT_IF_CAMERA_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfCameraScanSelected();\n        var TEXT_IF_FILE_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfFileScanSelected();\n        var section = document.getElementById(this.getDashboardSectionId());\n        var switchContainer = document.createElement(\"div\");\n        switchContainer.style.textAlign = \"center\";\n        var switchScanTypeLink = BaseUiElementFactory.createElement(\"span\", this.getDashboardSectionSwapLinkId());\n        switchScanTypeLink.style.textDecoration = \"underline\";\n        switchScanTypeLink.style.cursor = \"pointer\";\n        switchScanTypeLink.innerText\n            = ScanTypeSelector.isCameraScanType(this.currentScanType)\n                ? TEXT_IF_CAMERA_SCAN_SELECTED : TEXT_IF_FILE_SCAN_SELECTED;\n        switchScanTypeLink.addEventListener(\"click\", function () {\n            if (!$this.sectionSwapAllowed) {\n                if ($this.verbose) {\n                    $this.logger.logError(\"Section swap called when not allowed\");\n                }\n                return;\n            }\n            $this.resetHeaderMessage();\n            $this.fileSelectionUi.resetValue();\n            $this.sectionSwapAllowed = false;\n            if (ScanTypeSelector.isCameraScanType($this.currentScanType)) {\n                $this.clearScanRegion();\n                $this.getCameraScanRegion().style.display = \"none\";\n                $this.fileSelectionUi.show();\n                switchScanTypeLink.innerText = TEXT_IF_FILE_SCAN_SELECTED;\n                $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_FILE;\n                $this.insertFileScanImageToScanRegion();\n            }\n            else {\n                $this.clearScanRegion();\n                $this.getCameraScanRegion().style.display = \"block\";\n                $this.fileSelectionUi.hide();\n                switchScanTypeLink.innerText = TEXT_IF_CAMERA_SCAN_SELECTED;\n                $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_CAMERA;\n                $this.insertCameraScanImageToScanRegion();\n                $this.startCameraScanIfPermissionExistsOnSwap();\n            }\n            $this.sectionSwapAllowed = true;\n        });\n        switchContainer.appendChild(switchScanTypeLink);\n        section.appendChild(switchContainer);\n    };\n    Html5QrcodeScanner.prototype.startCameraScanIfPermissionExistsOnSwap = function () {\n        var _this = this;\n        var $this = this;\n        if (this.persistedDataManager.hasCameraPermissions()) {\n            CameraPermissions.hasPermissions().then(function (hasPermissions) {\n                if (hasPermissions) {\n                    var permissionButton = document.getElementById($this.getCameraPermissionButtonId());\n                    if (!permissionButton) {\n                        _this.logger.logError(\"Permission button not found, fail;\");\n                        throw \"Permission button not found\";\n                    }\n                    permissionButton.click();\n                }\n                else {\n                    $this.persistedDataManager.setHasPermission(false);\n                }\n            }).catch(function (_) {\n                $this.persistedDataManager.setHasPermission(false);\n            });\n            return;\n        }\n    };\n    Html5QrcodeScanner.prototype.resetHeaderMessage = function () {\n        var messageDiv = document.getElementById(this.getHeaderMessageContainerId());\n        messageDiv.style.display = \"none\";\n    };\n    Html5QrcodeScanner.prototype.setHeaderMessage = function (messageText, scannerStatus) {\n        if (!scannerStatus) {\n            scannerStatus = Html5QrcodeScannerStatus.STATUS_DEFAULT;\n        }\n        var messageDiv = this.getHeaderMessageDiv();\n        messageDiv.innerText = messageText;\n        messageDiv.style.display = \"block\";\n        switch (scannerStatus) {\n            case Html5QrcodeScannerStatus.STATUS_SUCCESS:\n                messageDiv.style.background = \"rgba(106, 175, 80, 0.26)\";\n                messageDiv.style.color = \"#477735\";\n                break;\n            case Html5QrcodeScannerStatus.STATUS_WARNING:\n                messageDiv.style.background = \"rgba(203, 36, 49, 0.14)\";\n                messageDiv.style.color = \"#cb2431\";\n                break;\n            case Html5QrcodeScannerStatus.STATUS_DEFAULT:\n            default:\n                messageDiv.style.background = \"rgba(0, 0, 0, 0)\";\n                messageDiv.style.color = \"rgb(17, 17, 17)\";\n                break;\n        }\n    };\n    Html5QrcodeScanner.prototype.showHideScanTypeSwapLink = function (shouldDisplay) {\n        if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n            if (shouldDisplay !== true) {\n                shouldDisplay = false;\n            }\n            this.sectionSwapAllowed = shouldDisplay;\n            this.getDashboardSectionSwapLink().style.display\n                = shouldDisplay ? \"inline-block\" : \"none\";\n        }\n    };\n    Html5QrcodeScanner.prototype.insertCameraScanImageToScanRegion = function () {\n        var $this = this;\n        var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n        if (this.cameraScanImage) {\n            qrCodeScanRegion.innerHTML = \"<br>\";\n            qrCodeScanRegion.appendChild(this.cameraScanImage);\n            return;\n        }\n        this.cameraScanImage = new Image;\n        this.cameraScanImage.onload = function (_) {\n            qrCodeScanRegion.innerHTML = \"<br>\";\n            qrCodeScanRegion.appendChild($this.cameraScanImage);\n        };\n        this.cameraScanImage.width = 64;\n        this.cameraScanImage.style.opacity = \"0.8\";\n        this.cameraScanImage.src = ASSET_CAMERA_SCAN;\n        this.cameraScanImage.alt = Html5QrcodeScannerStrings.cameraScanAltText();\n    };\n    Html5QrcodeScanner.prototype.insertFileScanImageToScanRegion = function () {\n        var $this = this;\n        var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n        if (this.fileScanImage) {\n            qrCodeScanRegion.innerHTML = \"<br>\";\n            qrCodeScanRegion.appendChild(this.fileScanImage);\n            return;\n        }\n        this.fileScanImage = new Image;\n        this.fileScanImage.onload = function (_) {\n            qrCodeScanRegion.innerHTML = \"<br>\";\n            qrCodeScanRegion.appendChild($this.fileScanImage);\n        };\n        this.fileScanImage.width = 64;\n        this.fileScanImage.style.opacity = \"0.8\";\n        this.fileScanImage.src = ASSET_FILE_SCAN;\n        this.fileScanImage.alt = Html5QrcodeScannerStrings.fileScanAltText();\n    };\n    Html5QrcodeScanner.prototype.clearScanRegion = function () {\n        var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n        qrCodeScanRegion.innerHTML = \"\";\n    };\n    Html5QrcodeScanner.prototype.getDashboardSectionId = function () {\n        return \"\".concat(this.elementId, \"__dashboard_section\");\n    };\n    Html5QrcodeScanner.prototype.getDashboardSectionCameraScanRegionId = function () {\n        return \"\".concat(this.elementId, \"__dashboard_section_csr\");\n    };\n    Html5QrcodeScanner.prototype.getDashboardSectionSwapLinkId = function () {\n        return PublicUiElementIdAndClasses.SCAN_TYPE_CHANGE_ANCHOR_ID;\n    };\n    Html5QrcodeScanner.prototype.getScanRegionId = function () {\n        return \"\".concat(this.elementId, \"__scan_region\");\n    };\n    Html5QrcodeScanner.prototype.getDashboardId = function () {\n        return \"\".concat(this.elementId, \"__dashboard\");\n    };\n    Html5QrcodeScanner.prototype.getHeaderMessageContainerId = function () {\n        return \"\".concat(this.elementId, \"__header_message\");\n    };\n    Html5QrcodeScanner.prototype.getCameraPermissionButtonId = function () {\n        return PublicUiElementIdAndClasses.CAMERA_PERMISSION_BUTTON_ID;\n    };\n    Html5QrcodeScanner.prototype.getCameraScanRegion = function () {\n        return document.getElementById(this.getDashboardSectionCameraScanRegionId());\n    };\n    Html5QrcodeScanner.prototype.getDashboardSectionSwapLink = function () {\n        return document.getElementById(this.getDashboardSectionSwapLinkId());\n    };\n    Html5QrcodeScanner.prototype.getHeaderMessageDiv = function () {\n        return document.getElementById(this.getHeaderMessageContainerId());\n    };\n    return Html5QrcodeScanner;\n}());\nexport { Html5QrcodeScanner };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}